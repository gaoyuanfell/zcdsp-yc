import {Injectable} from '@angular/core';
import {Actions, Effect, ofType} from '@ngrx/effects';
import {Action} from '@ngrx/store';
import {Observable} from 'rxjs';
import {DirectionalActionTypes, DirectionalAssign, DirectionalInit} from '../actions/directional.action';
import {switchMap} from 'rxjs/operators';

@Injectable()
export class DirectionalEffects {
  @Effect()
  initDirectional$ = (): Observable<Action> => {
    return this.actions$.pipe(
      ofType<DirectionalInit>(DirectionalActionTypes.DIRECTIONAL_INIT),
      switchMap(() => {
        return new Observable((observer) => {
          const areas = [{"children":[{"children":[],"level":"","parent_id":1,"name":"东城区","id":380,"area_id":1},{"children":[],"level":"","parent_id":1,"name":"西城区","id":381,"area_id":1},{"children":[],"level":"","parent_id":1,"name":"崇文区","id":382,"area_id":1},{"children":[],"level":"","parent_id":1,"name":"宣武区","id":383,"area_id":1},{"children":[],"level":"","parent_id":1,"name":"朝阳区","id":384,"area_id":1},{"children":[],"level":"","parent_id":1,"name":"丰台区","id":385,"area_id":1},{"children":[],"level":"","parent_id":1,"name":"石景山区","id":386,"area_id":1},{"children":[],"level":"","parent_id":1,"name":"海淀区","id":387,"area_id":1},{"children":[],"level":"","parent_id":1,"name":"门头沟区","id":388,"area_id":1},{"children":[],"level":"","parent_id":1,"name":"房山区","id":389,"area_id":1},{"children":[],"level":"","parent_id":1,"name":"通州区","id":390,"area_id":1},{"children":[],"level":"","parent_id":1,"name":"顺义区","id":391,"area_id":1},{"children":[],"level":"","parent_id":1,"name":"昌平区","id":392,"area_id":1},{"children":[],"level":"","parent_id":1,"name":"大兴区","id":393,"area_id":1},{"children":[],"level":"","parent_id":1,"name":"怀柔区","id":394,"area_id":1},{"children":[],"level":"","parent_id":1,"name":"平谷区","id":395,"area_id":1},{"children":[],"level":"","parent_id":1,"name":"密云县","id":396,"area_id":1},{"children":[],"level":"","parent_id":1,"name":"延庆县","id":397,"area_id":1}],"level":"一线","parent_id":0,"name":"北京市","id":1,"area_id":1},{"children":[{"children":[],"level":"","parent_id":2,"name":"和平区","id":398,"area_id":1},{"children":[],"level":"","parent_id":2,"name":"河东区","id":399,"area_id":1},{"children":[],"level":"","parent_id":2,"name":"河西区","id":400,"area_id":1},{"children":[],"level":"","parent_id":2,"name":"南开区","id":401,"area_id":1},{"children":[],"level":"","parent_id":2,"name":"河北区","id":402,"area_id":1},{"children":[],"level":"","parent_id":2,"name":"红桥区","id":403,"area_id":1},{"children":[],"level":"","parent_id":2,"name":"塘沽区","id":404,"area_id":1},{"children":[],"level":"","parent_id":2,"name":"汉沽区","id":405,"area_id":1},{"children":[],"level":"","parent_id":2,"name":"大港区","id":406,"area_id":1},{"children":[],"level":"","parent_id":2,"name":"东丽区","id":407,"area_id":1},{"children":[],"level":"","parent_id":2,"name":"西青区","id":408,"area_id":1},{"children":[],"level":"","parent_id":2,"name":"津南区","id":409,"area_id":1},{"children":[],"level":"","parent_id":2,"name":"北辰区","id":410,"area_id":1},{"children":[],"level":"","parent_id":2,"name":"武清区","id":411,"area_id":1},{"children":[],"level":"","parent_id":2,"name":"宝坻区","id":412,"area_id":1},{"children":[],"level":"","parent_id":2,"name":"宁河县","id":413,"area_id":1},{"children":[],"level":"","parent_id":2,"name":"静海县","id":414,"area_id":1},{"children":[],"level":"","parent_id":2,"name":"蓟县","id":415,"area_id":1}],"level":"二线","parent_id":0,"name":"天津市","id":2,"area_id":1},{"children":[{"children":[],"level":"二线","parent_id":3,"name":"石家庄市","id":39,"area_id":1},{"children":[],"level":"","parent_id":3,"name":"唐山市","id":40,"area_id":1},{"children":[],"level":"","parent_id":3,"name":"秦皇岛市","id":41,"area_id":1},{"children":[],"level":"","parent_id":3,"name":"邯郸市","id":42,"area_id":1},{"children":[],"level":"","parent_id":3,"name":"邢台市","id":43,"area_id":1},{"children":[],"level":"","parent_id":3,"name":"保定市","id":44,"area_id":1},{"children":[],"level":"","parent_id":3,"name":"张家口市","id":45,"area_id":1},{"children":[],"level":"","parent_id":3,"name":"承德市","id":46,"area_id":1},{"children":[],"level":"","parent_id":3,"name":"沧州市","id":47,"area_id":1},{"children":[],"level":"","parent_id":3,"name":"廊坊市","id":48,"area_id":1},{"children":[],"level":"","parent_id":3,"name":"衡水市","id":49,"area_id":1}],"level":"","parent_id":0,"name":"河北省","id":3,"area_id":1},{"children":[{"children":[],"level":"二线","parent_id":4,"name":"太原市","id":50,"area_id":1},{"children":[],"level":"","parent_id":4,"name":"大同市","id":51,"area_id":1},{"children":[],"level":"","parent_id":4,"name":"阳泉市","id":52,"area_id":1},{"children":[],"level":"","parent_id":4,"name":"长治市","id":53,"area_id":1},{"children":[],"level":"","parent_id":4,"name":"晋城市","id":54,"area_id":1},{"children":[],"level":"","parent_id":4,"name":"朔州市","id":55,"area_id":1},{"children":[],"level":"","parent_id":4,"name":"晋中市","id":56,"area_id":1},{"children":[],"level":"","parent_id":4,"name":"运城市","id":57,"area_id":1},{"children":[],"level":"","parent_id":4,"name":"忻州市","id":58,"area_id":1},{"children":[],"level":"","parent_id":4,"name":"临汾市","id":59,"area_id":1},{"children":[],"level":"","parent_id":4,"name":"吕梁市","id":60,"area_id":1}],"level":"","parent_id":0,"name":"山西省","id":4,"area_id":1},{"children":[{"children":[],"level":"二线","parent_id":5,"name":"呼和浩特市","id":61,"area_id":1},{"children":[],"level":"","parent_id":5,"name":"包头市","id":62,"area_id":1},{"children":[],"level":"","parent_id":5,"name":"乌海市","id":63,"area_id":1},{"children":[],"level":"","parent_id":5,"name":"赤峰市","id":64,"area_id":1},{"children":[],"level":"","parent_id":5,"name":"通辽市","id":65,"area_id":1},{"children":[],"level":"","parent_id":5,"name":"鄂尔多斯市","id":66,"area_id":1},{"children":[],"level":"","parent_id":5,"name":"呼伦贝尔市","id":67,"area_id":1},{"children":[],"level":"","parent_id":5,"name":"巴彦淖尔市","id":68,"area_id":1},{"children":[],"level":"","parent_id":5,"name":"乌兰察布市","id":69,"area_id":1},{"children":[],"level":"","parent_id":5,"name":"兴安盟","id":70,"area_id":1},{"children":[],"level":"","parent_id":5,"name":"锡林郭勒盟","id":71,"area_id":1},{"children":[],"level":"","parent_id":5,"name":"阿拉善盟","id":72,"area_id":1},{"children":[],"level":"","parent_id":5,"name":"乌海市","id":514,"area_id":6},{"children":[],"level":"","parent_id":5,"name":"锡林浩特","id":515,"area_id":6},{"children":[],"level":"","parent_id":5,"name":"乌兰浩特市","id":516,"area_id":6},{"children":[],"level":"","parent_id":5,"name":"满洲里市","id":517,"area_id":6},{"children":[],"level":"","parent_id":5,"name":"赤峰市","id":518,"area_id":6}],"level":"","parent_id":0,"name":"内蒙古","id":5,"area_id":1},{"children":[{"children":[],"level":"二线","parent_id":6,"name":"沈阳市","id":73,"area_id":2},{"children":[],"level":"二线","parent_id":6,"name":"大连市","id":74,"area_id":2},{"children":[],"level":"","parent_id":6,"name":"鞍山市","id":75,"area_id":2},{"children":[],"level":"","parent_id":6,"name":"抚顺市","id":76,"area_id":2},{"children":[],"level":"","parent_id":6,"name":"本溪市","id":77,"area_id":2},{"children":[],"level":"","parent_id":6,"name":"丹东市","id":78,"area_id":2},{"children":[],"level":"","parent_id":6,"name":"锦州市","id":79,"area_id":2},{"children":[],"level":"","parent_id":6,"name":"营口市","id":80,"area_id":2},{"children":[],"level":"","parent_id":6,"name":"阜新市","id":81,"area_id":2},{"children":[],"level":"","parent_id":6,"name":"辽阳市","id":82,"area_id":2},{"children":[],"level":"","parent_id":6,"name":"盘锦市","id":83,"area_id":2},{"children":[],"level":"","parent_id":6,"name":"铁岭市","id":84,"area_id":2},{"children":[],"level":"","parent_id":6,"name":"朝阳市","id":85,"area_id":2},{"children":[],"level":"","parent_id":6,"name":"葫芦岛市","id":86,"area_id":2}],"level":"","parent_id":0,"name":"辽宁省","id":6,"area_id":2},{"children":[{"children":[],"level":"二线","parent_id":7,"name":"长春市","id":87,"area_id":2},{"children":[],"level":"","parent_id":7,"name":"吉林市","id":88,"area_id":2},{"children":[],"level":"","parent_id":7,"name":"四平市","id":89,"area_id":2},{"children":[],"level":"","parent_id":7,"name":"辽源市","id":90,"area_id":2},{"children":[],"level":"","parent_id":7,"name":"通化市","id":91,"area_id":2},{"children":[],"level":"","parent_id":7,"name":"白山市","id":92,"area_id":2},{"children":[],"level":"","parent_id":7,"name":"松原市","id":93,"area_id":2},{"children":[],"level":"","parent_id":7,"name":"白城市","id":94,"area_id":2},{"children":[],"level":"","parent_id":7,"name":"延边朝鲜族自治州","id":95,"area_id":2},{"children":[],"level":"","parent_id":7,"name":"白山市","id":512,"area_id":2},{"children":[],"level":"","parent_id":7,"name":"延吉市","id":513,"area_id":2}],"level":"","parent_id":0,"name":"吉林省","id":7,"area_id":2},{"children":[{"children":[],"level":"二线","parent_id":8,"name":"哈尔滨市","id":96,"area_id":2},{"children":[],"level":"","parent_id":8,"name":"齐齐哈尔市","id":97,"area_id":2},{"children":[],"level":"","parent_id":8,"name":"鸡西市","id":98,"area_id":2},{"children":[],"level":"","parent_id":8,"name":"鹤岗市","id":99,"area_id":2},{"children":[],"level":"","parent_id":8,"name":"双鸭山市","id":100,"area_id":2},{"children":[],"level":"","parent_id":8,"name":"大庆市","id":101,"area_id":2},{"children":[],"level":"","parent_id":8,"name":"伊春市","id":102,"area_id":2},{"children":[],"level":"","parent_id":8,"name":"佳木斯市","id":103,"area_id":2},{"children":[],"level":"","parent_id":8,"name":"七台河市","id":104,"area_id":2},{"children":[],"level":"","parent_id":8,"name":"牡丹江市","id":105,"area_id":2},{"children":[],"level":"","parent_id":8,"name":"黑河市","id":106,"area_id":2},{"children":[],"level":"","parent_id":8,"name":"绥化市","id":107,"area_id":2},{"children":[],"level":"","parent_id":8,"name":"大兴安岭地区","id":108,"area_id":2}],"level":"","parent_id":0,"name":"黑龙江省","id":8,"area_id":2},{"children":[{"children":[],"level":"","parent_id":9,"name":"黄浦区","id":416,"area_id":3},{"children":[],"level":"","parent_id":9,"name":"卢湾区","id":417,"area_id":3},{"children":[],"level":"","parent_id":9,"name":"徐汇区","id":418,"area_id":3},{"children":[],"level":"","parent_id":9,"name":"长宁区","id":419,"area_id":3},{"children":[],"level":"","parent_id":9,"name":"静安区","id":420,"area_id":3},{"children":[],"level":"","parent_id":9,"name":"普陀区","id":421,"area_id":3},{"children":[],"level":"","parent_id":9,"name":"闸北区","id":422,"area_id":3},{"children":[],"level":"","parent_id":9,"name":"虹口区","id":423,"area_id":3},{"children":[],"level":"","parent_id":9,"name":"杨浦区","id":424,"area_id":3},{"children":[],"level":"","parent_id":9,"name":"闵行区","id":425,"area_id":3},{"children":[],"level":"","parent_id":9,"name":"宝山区","id":426,"area_id":3},{"children":[],"level":"","parent_id":9,"name":"嘉定区","id":427,"area_id":3},{"children":[],"level":"","parent_id":9,"name":"浦东新区","id":428,"area_id":3},{"children":[],"level":"","parent_id":9,"name":"金山区","id":429,"area_id":3},{"children":[],"level":"","parent_id":9,"name":"松江区","id":430,"area_id":3},{"children":[],"level":"","parent_id":9,"name":"青浦区","id":431,"area_id":3},{"children":[],"level":"","parent_id":9,"name":"南汇区","id":432,"area_id":3},{"children":[],"level":"","parent_id":9,"name":"奉贤区","id":433,"area_id":3},{"children":[],"level":"","parent_id":9,"name":"崇明县","id":434,"area_id":3}],"level":"一线","parent_id":0,"name":"上海市","id":9,"area_id":3},{"children":[{"children":[],"level":"二线","parent_id":10,"name":"南京市","id":111,"area_id":3},{"children":[],"level":"","parent_id":10,"name":"无锡市","id":112,"area_id":3},{"children":[],"level":"","parent_id":10,"name":"徐州市","id":113,"area_id":3},{"children":[],"level":"","parent_id":10,"name":"常州市","id":114,"area_id":3},{"children":[],"level":"","parent_id":10,"name":"苏州市","id":115,"area_id":3},{"children":[],"level":"","parent_id":10,"name":"南通市","id":116,"area_id":3},{"children":[],"level":"","parent_id":10,"name":"连云港市","id":117,"area_id":3},{"children":[],"level":"","parent_id":10,"name":"淮安市","id":118,"area_id":3},{"children":[],"level":"","parent_id":10,"name":"盐城市","id":119,"area_id":3},{"children":[],"level":"","parent_id":10,"name":"扬州市","id":120,"area_id":3},{"children":[],"level":"","parent_id":10,"name":"镇江市","id":121,"area_id":3},{"children":[],"level":"","parent_id":10,"name":"泰州市","id":122,"area_id":3},{"children":[],"level":"","parent_id":10,"name":"宿迁市","id":123,"area_id":3}],"level":"","parent_id":0,"name":"江苏省","id":10,"area_id":3},{"children":[{"children":[],"level":"二线","parent_id":11,"name":"杭州市","id":124,"area_id":3},{"children":[],"level":"二线","parent_id":11,"name":"宁波市","id":125,"area_id":3},{"children":[],"level":"","parent_id":11,"name":"温州市","id":126,"area_id":3},{"children":[],"level":"","parent_id":11,"name":"嘉兴市","id":127,"area_id":3},{"children":[],"level":"","parent_id":11,"name":"湖州市","id":128,"area_id":3},{"children":[],"level":"","parent_id":11,"name":"绍兴市","id":129,"area_id":3},{"children":[],"level":"","parent_id":11,"name":"金华市","id":130,"area_id":3},{"children":[],"level":"","parent_id":11,"name":"衢州市","id":131,"area_id":3},{"children":[],"level":"","parent_id":11,"name":"舟山市","id":132,"area_id":3},{"children":[],"level":"","parent_id":11,"name":"台州市","id":133,"area_id":3},{"children":[],"level":"","parent_id":11,"name":"丽水市","id":134,"area_id":3},{"children":[],"level":"","parent_id":11,"name":"义乌市","id":492,"area_id":3}],"level":"","parent_id":0,"name":"浙江省","id":11,"area_id":3},{"children":[{"children":[],"level":"二线","parent_id":12,"name":"合肥市","id":135,"area_id":3},{"children":[],"level":"","parent_id":12,"name":"芜湖市","id":136,"area_id":3},{"children":[],"level":"","parent_id":12,"name":"蚌埠市","id":137,"area_id":3},{"children":[],"level":"","parent_id":12,"name":"淮南市","id":138,"area_id":3},{"children":[],"level":"","parent_id":12,"name":"马鞍山市","id":139,"area_id":3},{"children":[],"level":"","parent_id":12,"name":"淮北市","id":140,"area_id":3},{"children":[],"level":"","parent_id":12,"name":"铜陵市","id":141,"area_id":3},{"children":[],"level":"","parent_id":12,"name":"安庆市","id":142,"area_id":3},{"children":[],"level":"","parent_id":12,"name":"黄山市","id":143,"area_id":3},{"children":[],"level":"","parent_id":12,"name":"滁州市","id":144,"area_id":3},{"children":[],"level":"","parent_id":12,"name":"阜阳市","id":145,"area_id":3},{"children":[],"level":"","parent_id":12,"name":"宿州市","id":146,"area_id":3},{"children":[],"level":"","parent_id":12,"name":"巢湖市","id":147,"area_id":3},{"children":[],"level":"","parent_id":12,"name":"六安市","id":148,"area_id":3},{"children":[],"level":"","parent_id":12,"name":"亳州市","id":149,"area_id":3},{"children":[],"level":"","parent_id":12,"name":"池州市","id":150,"area_id":3},{"children":[],"level":"","parent_id":12,"name":"宣城市","id":151,"area_id":3}],"level":"","parent_id":0,"name":"安徽省","id":12,"area_id":3},{"children":[{"children":[],"level":"二线","parent_id":13,"name":"福州市","id":152,"area_id":3},{"children":[],"level":"二线","parent_id":13,"name":"厦门市","id":153,"area_id":3},{"children":[],"level":"","parent_id":13,"name":"莆田市","id":154,"area_id":3},{"children":[],"level":"","parent_id":13,"name":"三明市","id":155,"area_id":3},{"children":[],"level":"","parent_id":13,"name":"泉州市","id":156,"area_id":3},{"children":[],"level":"","parent_id":13,"name":"漳州市","id":157,"area_id":3},{"children":[],"level":"","parent_id":13,"name":"南平市","id":158,"area_id":3},{"children":[],"level":"","parent_id":13,"name":"龙岩市","id":159,"area_id":3},{"children":[],"level":"","parent_id":13,"name":"宁德市","id":160,"area_id":3},{"children":[],"level":"","parent_id":13,"name":"晋江市","id":519,"area_id":3},{"children":[],"level":"","parent_id":13,"name":"武夷山市","id":520,"area_id":3}],"level":"","parent_id":0,"name":"福建省","id":13,"area_id":3},{"children":[{"children":[],"level":"二线","parent_id":14,"name":"南昌市","id":161,"area_id":3},{"children":[],"level":"","parent_id":14,"name":"景德镇市","id":162,"area_id":3},{"children":[],"level":"","parent_id":14,"name":"萍乡市","id":163,"area_id":3},{"children":[],"level":"","parent_id":14,"name":"九江市","id":164,"area_id":3},{"children":[],"level":"","parent_id":14,"name":"新余市","id":165,"area_id":3},{"children":[],"level":"","parent_id":14,"name":"鹰潭市","id":166,"area_id":3},{"children":[],"level":"","parent_id":14,"name":"赣州市","id":167,"area_id":3},{"children":[],"level":"","parent_id":14,"name":"吉安市","id":168,"area_id":3},{"children":[],"level":"","parent_id":14,"name":"宜春市","id":169,"area_id":3},{"children":[],"level":"","parent_id":14,"name":"抚州市","id":170,"area_id":3},{"children":[],"level":"","parent_id":14,"name":"上饶市","id":171,"area_id":3}],"level":"","parent_id":0,"name":"江西省","id":14,"area_id":3},{"children":[{"children":[],"level":"二线","parent_id":15,"name":"济南市","id":172,"area_id":3},{"children":[],"level":"二线","parent_id":15,"name":"青岛市","id":173,"area_id":3},{"children":[],"level":"","parent_id":15,"name":"淄博市","id":174,"area_id":3},{"children":[],"level":"","parent_id":15,"name":"枣庄市","id":175,"area_id":3},{"children":[],"level":"","parent_id":15,"name":"东营市","id":176,"area_id":3},{"children":[],"level":"","parent_id":15,"name":"烟台市","id":177,"area_id":3},{"children":[],"level":"","parent_id":15,"name":"潍坊市","id":178,"area_id":3},{"children":[],"level":"","parent_id":15,"name":"济宁市","id":179,"area_id":3},{"children":[],"level":"","parent_id":15,"name":"泰安市","id":180,"area_id":3},{"children":[],"level":"","parent_id":15,"name":"威海市","id":181,"area_id":3},{"children":[],"level":"","parent_id":15,"name":"日照市","id":182,"area_id":3},{"children":[],"level":"","parent_id":15,"name":"莱芜市","id":183,"area_id":3},{"children":[],"level":"","parent_id":15,"name":"临沂市","id":184,"area_id":3},{"children":[],"level":"","parent_id":15,"name":"德州市","id":185,"area_id":3},{"children":[],"level":"","parent_id":15,"name":"聊城市","id":186,"area_id":3},{"children":[],"level":"","parent_id":15,"name":"滨州市","id":187,"area_id":3},{"children":[],"level":"","parent_id":15,"name":"荷泽市","id":188,"area_id":3}],"level":"","parent_id":0,"name":"山东省","id":15,"area_id":3},{"children":[{"children":[],"level":"二线","parent_id":16,"name":"郑州市","id":189,"area_id":4},{"children":[],"level":"","parent_id":16,"name":"开封市","id":190,"area_id":4},{"children":[],"level":"","parent_id":16,"name":"洛阳市","id":191,"area_id":4},{"children":[],"level":"","parent_id":16,"name":"平顶山市","id":192,"area_id":4},{"children":[],"level":"","parent_id":16,"name":"安阳市","id":193,"area_id":4},{"children":[],"level":"","parent_id":16,"name":"鹤壁市","id":194,"area_id":4},{"children":[],"level":"","parent_id":16,"name":"新乡市","id":195,"area_id":4},{"children":[],"level":"","parent_id":16,"name":"焦作市","id":196,"area_id":4},{"children":[],"level":"","parent_id":16,"name":"濮阳市","id":197,"area_id":4},{"children":[],"level":"","parent_id":16,"name":"许昌市","id":198,"area_id":4},{"children":[],"level":"","parent_id":16,"name":"漯河市","id":199,"area_id":4},{"children":[],"level":"","parent_id":16,"name":"三门峡市","id":200,"area_id":4},{"children":[],"level":"","parent_id":16,"name":"南阳市","id":201,"area_id":4},{"children":[],"level":"","parent_id":16,"name":"商丘市","id":202,"area_id":4},{"children":[],"level":"","parent_id":16,"name":"信阳市","id":203,"area_id":4},{"children":[],"level":"","parent_id":16,"name":"周口市","id":204,"area_id":4},{"children":[],"level":"","parent_id":16,"name":"驻马店市","id":205,"area_id":4},{"children":[],"level":"","parent_id":16,"name":"济源市","id":480,"area_id":4}],"level":"","parent_id":0,"name":"河南省","id":16,"area_id":4},{"children":[{"children":[],"level":"二线","parent_id":17,"name":"武汉市","id":206,"area_id":4},{"children":[],"level":"","parent_id":17,"name":"黄石市","id":207,"area_id":4},{"children":[],"level":"","parent_id":17,"name":"十堰市","id":208,"area_id":4},{"children":[],"level":"","parent_id":17,"name":"宜昌市","id":209,"area_id":4},{"children":[],"level":"","parent_id":17,"name":"襄樊市","id":210,"area_id":4},{"children":[],"level":"","parent_id":17,"name":"鄂州市","id":211,"area_id":4},{"children":[],"level":"","parent_id":17,"name":"荆门市","id":212,"area_id":4},{"children":[],"level":"","parent_id":17,"name":"孝感市","id":213,"area_id":4},{"children":[],"level":"","parent_id":17,"name":"荆州市","id":214,"area_id":4},{"children":[],"level":"","parent_id":17,"name":"黄冈市","id":215,"area_id":4},{"children":[],"level":"","parent_id":17,"name":"咸宁市","id":216,"area_id":4},{"children":[],"level":"","parent_id":17,"name":"随州市","id":217,"area_id":4},{"children":[],"level":"","parent_id":17,"name":"恩施土家族苗族自治州","id":218,"area_id":4},{"children":[],"level":"","parent_id":17,"name":"仙桃市","id":481,"area_id":4},{"children":[],"level":"","parent_id":17,"name":"潜江市","id":482,"area_id":4},{"children":[],"level":"","parent_id":17,"name":"天门市","id":483,"area_id":4},{"children":[],"level":"","parent_id":17,"name":"神农架林区","id":484,"area_id":4},{"children":[],"level":"","parent_id":17,"name":"襄阳市","id":504,"area_id":4}],"level":"","parent_id":0,"name":"湖北省","id":17,"area_id":4},{"children":[{"children":[],"level":"二线","parent_id":18,"name":"长沙市","id":220,"area_id":4},{"children":[],"level":"","parent_id":18,"name":"株洲市","id":221,"area_id":4},{"children":[],"level":"","parent_id":18,"name":"湘潭市","id":222,"area_id":4},{"children":[],"level":"","parent_id":18,"name":"衡阳市","id":223,"area_id":4},{"children":[],"level":"","parent_id":18,"name":"邵阳市","id":224,"area_id":4},{"children":[],"level":"","parent_id":18,"name":"岳阳市","id":225,"area_id":4},{"children":[],"level":"","parent_id":18,"name":"常德市","id":226,"area_id":4},{"children":[],"level":"","parent_id":18,"name":"张家界市","id":227,"area_id":4},{"children":[],"level":"","parent_id":18,"name":"益阳市","id":228,"area_id":4},{"children":[],"level":"","parent_id":18,"name":"郴州市","id":229,"area_id":4},{"children":[],"level":"","parent_id":18,"name":"永州市","id":230,"area_id":4},{"children":[],"level":"","parent_id":18,"name":"怀化市","id":231,"area_id":4},{"children":[],"level":"","parent_id":18,"name":"娄底市","id":232,"area_id":4},{"children":[],"level":"","parent_id":18,"name":"湘西土家族苗族自治州","id":233,"area_id":4}],"level":"","parent_id":0,"name":"湖南省","id":18,"area_id":4},{"children":[{"children":[],"level":"一线","parent_id":19,"name":"广州市","id":234,"area_id":4},{"children":[],"level":"","parent_id":19,"name":"韶关市","id":235,"area_id":4},{"children":[],"level":"一线","parent_id":19,"name":"深圳市","id":236,"area_id":4},{"children":[],"level":"","parent_id":19,"name":"珠海市","id":237,"area_id":4},{"children":[],"level":"","parent_id":19,"name":"汕头市","id":238,"area_id":4},{"children":[],"level":"二线","parent_id":19,"name":"佛山市","id":239,"area_id":4},{"children":[],"level":"","parent_id":19,"name":"江门市","id":240,"area_id":4},{"children":[],"level":"","parent_id":19,"name":"湛江市","id":241,"area_id":4},{"children":[],"level":"","parent_id":19,"name":"茂名市","id":242,"area_id":4},{"children":[],"level":"","parent_id":19,"name":"肇庆市","id":243,"area_id":4},{"children":[],"level":"","parent_id":19,"name":"惠州市","id":244,"area_id":4},{"children":[],"level":"","parent_id":19,"name":"梅州市","id":245,"area_id":4},{"children":[],"level":"","parent_id":19,"name":"汕尾市","id":246,"area_id":4},{"children":[],"level":"","parent_id":19,"name":"河源市","id":247,"area_id":4},{"children":[],"level":"","parent_id":19,"name":"阳江市","id":248,"area_id":4},{"children":[],"level":"","parent_id":19,"name":"清远市","id":249,"area_id":4},{"children":[],"level":"","parent_id":19,"name":"东莞市","id":250,"area_id":4},{"children":[],"level":"","parent_id":19,"name":"中山市","id":251,"area_id":4},{"children":[],"level":"","parent_id":19,"name":"潮州市","id":252,"area_id":4},{"children":[],"level":"","parent_id":19,"name":"揭阳市","id":253,"area_id":4},{"children":[],"level":"","parent_id":19,"name":"云浮市","id":254,"area_id":4}],"level":"","parent_id":0,"name":"广东省","id":19,"area_id":4},{"children":[{"children":[],"level":"二线","parent_id":20,"name":"南宁市","id":255,"area_id":4},{"children":[],"level":"","parent_id":20,"name":"柳州市","id":256,"area_id":4},{"children":[],"level":"","parent_id":20,"name":"桂林市","id":257,"area_id":4},{"children":[],"level":"","parent_id":20,"name":"梧州市","id":258,"area_id":4},{"children":[],"level":"","parent_id":20,"name":"北海市","id":259,"area_id":4},{"children":[],"level":"","parent_id":20,"name":"防城港市","id":260,"area_id":4},{"children":[],"level":"","parent_id":20,"name":"钦州市","id":261,"area_id":4},{"children":[],"level":"","parent_id":20,"name":"贵港市","id":262,"area_id":4},{"children":[],"level":"","parent_id":20,"name":"玉林市","id":263,"area_id":4},{"children":[],"level":"","parent_id":20,"name":"百色市","id":264,"area_id":4},{"children":[],"level":"","parent_id":20,"name":"贺州市","id":265,"area_id":4},{"children":[],"level":"","parent_id":20,"name":"河池市","id":266,"area_id":4},{"children":[],"level":"","parent_id":20,"name":"来宾市","id":267,"area_id":4},{"children":[],"level":"","parent_id":20,"name":"崇左市","id":268,"area_id":4}],"level":"","parent_id":0,"name":"广西","id":20,"area_id":4},{"children":[{"children":[],"level":"二线","parent_id":21,"name":"海口市","id":269,"area_id":4},{"children":[],"level":"","parent_id":21,"name":"三亚市","id":270,"area_id":4},{"children":[],"level":"","parent_id":21,"name":"五指山市","id":475,"area_id":4},{"children":[],"level":"","parent_id":21,"name":"琼海市","id":476,"area_id":4},{"children":[],"level":"","parent_id":21,"name":"文昌市","id":477,"area_id":4},{"children":[],"level":"","parent_id":21,"name":"万宁市","id":478,"area_id":4},{"children":[],"level":"","parent_id":21,"name":"东方市","id":479,"area_id":4}],"level":"","parent_id":0,"name":"海南省","id":21,"area_id":4},{"children":[{"children":[],"level":"","parent_id":22,"name":"万州区","id":435,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"涪陵区","id":436,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"渝中区","id":437,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"大渡口区","id":438,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"江北区","id":439,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"沙坪坝区","id":440,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"九龙坡区","id":441,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"南岸区","id":442,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"北碚区","id":443,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"万盛区","id":444,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"双桥区","id":445,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"渝北区","id":446,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"巴南区","id":447,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"黔江区","id":448,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"长寿区","id":449,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"綦江县","id":450,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"潼南县","id":451,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"铜梁县","id":452,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"大足县","id":453,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"荣昌县","id":454,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"璧山县","id":455,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"梁平县","id":456,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"城口县","id":457,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"丰都县","id":458,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"垫江县","id":459,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"武隆县","id":460,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"忠县","id":461,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"开县","id":462,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"云阳县","id":463,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"奉节县","id":464,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"巫山县","id":465,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"巫溪县","id":466,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"石柱土家族自治县","id":467,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"秀山土家族苗族自治县","id":468,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"酉阳土家族苗族自治县","id":469,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"彭水苗族土家族自治县","id":470,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"江津市","id":471,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"合川市","id":472,"area_id":5},{"children":[],"level":"","parent_id":22,"name":"永川市","id":473,"area_id":5},{"children":[],"level":"二线","parent_id":22,"name":"南川市","id":474,"area_id":5}],"level":"二线","parent_id":0,"name":"重庆市","id":22,"area_id":5},{"children":[{"children":[],"level":"二线","parent_id":23,"name":"成都市","id":275,"area_id":5},{"children":[],"level":"","parent_id":23,"name":"自贡市","id":276,"area_id":5},{"children":[],"level":"","parent_id":23,"name":"攀枝花市","id":277,"area_id":5},{"children":[],"level":"","parent_id":23,"name":"泸州市","id":278,"area_id":5},{"children":[],"level":"","parent_id":23,"name":"德阳市","id":279,"area_id":5},{"children":[],"level":"","parent_id":23,"name":"绵阳市","id":280,"area_id":5},{"children":[],"level":"","parent_id":23,"name":"广元市","id":281,"area_id":5},{"children":[],"level":"","parent_id":23,"name":"遂宁市","id":282,"area_id":5},{"children":[],"level":"","parent_id":23,"name":"内江市","id":283,"area_id":5},{"children":[],"level":"","parent_id":23,"name":"乐山市","id":284,"area_id":5},{"children":[],"level":"","parent_id":23,"name":"南充市","id":285,"area_id":5},{"children":[],"level":"","parent_id":23,"name":"眉山市","id":286,"area_id":5},{"children":[],"level":"","parent_id":23,"name":"宜宾市","id":287,"area_id":5},{"children":[],"level":"","parent_id":23,"name":"广安市","id":288,"area_id":5},{"children":[],"level":"","parent_id":23,"name":"达州市","id":289,"area_id":5},{"children":[],"level":"","parent_id":23,"name":"雅安市","id":290,"area_id":5},{"children":[],"level":"","parent_id":23,"name":"巴中市","id":291,"area_id":5},{"children":[],"level":"","parent_id":23,"name":"资阳市","id":292,"area_id":5},{"children":[],"level":"","parent_id":23,"name":"阿坝藏族羌族自治州","id":293,"area_id":5},{"children":[],"level":"","parent_id":23,"name":"甘孜藏族自治州","id":294,"area_id":5},{"children":[],"level":"","parent_id":23,"name":"凉山彝族自治州","id":295,"area_id":5},{"children":[],"level":"","parent_id":23,"name":"康定市","id":501,"area_id":5},{"children":[],"level":"","parent_id":23,"name":"达州市","id":502,"area_id":5},{"children":[],"level":"","parent_id":23,"name":"西昌市","id":503,"area_id":5}],"level":"","parent_id":0,"name":"四川省","id":23,"area_id":5},{"children":[{"children":[],"level":"二线","parent_id":24,"name":"贵阳市","id":296,"area_id":5},{"children":[],"level":"","parent_id":24,"name":"六盘水市","id":297,"area_id":5},{"children":[],"level":"","parent_id":24,"name":"遵义市","id":298,"area_id":5},{"children":[],"level":"","parent_id":24,"name":"安顺市","id":299,"area_id":5},{"children":[],"level":"","parent_id":24,"name":"铜仁地区","id":300,"area_id":5},{"children":[],"level":"","parent_id":24,"name":"黔西南布依族苗族自治州","id":301,"area_id":5},{"children":[],"level":"","parent_id":24,"name":"毕节地区","id":302,"area_id":5},{"children":[],"level":"","parent_id":24,"name":"黔东南苗族侗族自治州","id":303,"area_id":5},{"children":[],"level":"","parent_id":24,"name":"黔南布依族苗族自治州","id":304,"area_id":5},{"children":[],"level":"","parent_id":24,"name":"荔波县","id":494,"area_id":6},{"children":[],"level":"","parent_id":24,"name":"黎平县","id":495,"area_id":6}],"level":"","parent_id":0,"name":"贵州省","id":24,"area_id":5},{"children":[{"children":[],"level":"二线","parent_id":25,"name":"昆明市","id":305,"area_id":5},{"children":[],"level":"","parent_id":25,"name":"曲靖市","id":306,"area_id":5},{"children":[],"level":"","parent_id":25,"name":"玉溪市","id":307,"area_id":5},{"children":[],"level":"","parent_id":25,"name":"保山市","id":308,"area_id":5},{"children":[],"level":"","parent_id":25,"name":"昭通市","id":309,"area_id":5},{"children":[],"level":"","parent_id":25,"name":"丽江市","id":310,"area_id":5},{"children":[],"level":"","parent_id":25,"name":"思茅市","id":311,"area_id":5},{"children":[],"level":"","parent_id":25,"name":"临沧市","id":312,"area_id":5},{"children":[],"level":"","parent_id":25,"name":"楚雄彝族自治州","id":313,"area_id":5},{"children":[],"level":"","parent_id":25,"name":"红河哈尼族彝族自治州","id":314,"area_id":5},{"children":[],"level":"","parent_id":25,"name":"文山壮族苗族自治州","id":315,"area_id":5},{"children":[],"level":"","parent_id":25,"name":"西双版纳傣族自治州","id":316,"area_id":5},{"children":[],"level":"","parent_id":25,"name":"大理白族自治州","id":317,"area_id":5},{"children":[],"level":"","parent_id":25,"name":"德宏傣族景颇族自治州","id":318,"area_id":5},{"children":[],"level":"","parent_id":25,"name":"怒江傈僳族自治州","id":319,"area_id":5},{"children":[],"level":"","parent_id":25,"name":"迪庆藏族自治州","id":320,"area_id":5},{"children":[],"level":"","parent_id":25,"name":"临沧市","id":496,"area_id":5},{"children":[],"level":"","parent_id":25,"name":"普洱市","id":497,"area_id":5},{"children":[],"level":"","parent_id":25,"name":"大理市","id":498,"area_id":5},{"children":[],"level":"","parent_id":25,"name":"文山市","id":499,"area_id":5},{"children":[],"level":"","parent_id":25,"name":"香格里拉市","id":500,"area_id":5}],"level":"","parent_id":0,"name":"云南省","id":25,"area_id":5},{"children":[{"children":[],"level":"","parent_id":26,"name":"拉萨市","id":321,"area_id":5},{"children":[],"level":"","parent_id":26,"name":"昌都地区","id":322,"area_id":5},{"children":[],"level":"","parent_id":26,"name":"山南地区","id":323,"area_id":5},{"children":[],"level":"","parent_id":26,"name":"日喀则地区","id":324,"area_id":5},{"children":[],"level":"","parent_id":26,"name":"那曲地区","id":325,"area_id":5},{"children":[],"level":"","parent_id":26,"name":"阿里地区","id":326,"area_id":5},{"children":[],"level":"","parent_id":26,"name":"林芝地区","id":327,"area_id":5},{"children":[],"level":"","parent_id":26,"name":"昌都市","id":493,"area_id":5}],"level":"","parent_id":0,"name":"西藏","id":26,"area_id":5},{"children":[{"children":[],"level":"二线","parent_id":27,"name":"西安市","id":328,"area_id":6},{"children":[],"level":"","parent_id":27,"name":"铜川市","id":329,"area_id":6},{"children":[],"level":"","parent_id":27,"name":"宝鸡市","id":330,"area_id":6},{"children":[],"level":"","parent_id":27,"name":"咸阳市","id":331,"area_id":6},{"children":[],"level":"","parent_id":27,"name":"渭南市","id":332,"area_id":6},{"children":[],"level":"","parent_id":27,"name":"延安市","id":333,"area_id":6},{"children":[],"level":"","parent_id":27,"name":"汉中市","id":334,"area_id":6},{"children":[],"level":"","parent_id":27,"name":"榆林市","id":335,"area_id":6},{"children":[],"level":"","parent_id":27,"name":"安康市","id":336,"area_id":6},{"children":[],"level":"","parent_id":27,"name":"商洛市","id":337,"area_id":6}],"level":"","parent_id":0,"name":"陕西省","id":27,"area_id":6},{"children":[{"children":[],"level":"二线","parent_id":28,"name":"兰州市","id":338,"area_id":6},{"children":[],"level":"","parent_id":28,"name":"嘉峪关市","id":339,"area_id":6},{"children":[],"level":"","parent_id":28,"name":"金昌市","id":340,"area_id":6},{"children":[],"level":"","parent_id":28,"name":"白银市","id":341,"area_id":6},{"children":[],"level":"","parent_id":28,"name":"天水市","id":342,"area_id":6},{"children":[],"level":"","parent_id":28,"name":"武威市","id":343,"area_id":6},{"children":[],"level":"","parent_id":28,"name":"张掖市","id":344,"area_id":6},{"children":[],"level":"","parent_id":28,"name":"平凉市","id":345,"area_id":6},{"children":[],"level":"","parent_id":28,"name":"酒泉市","id":346,"area_id":6},{"children":[],"level":"","parent_id":28,"name":"庆阳市","id":347,"area_id":6},{"children":[],"level":"","parent_id":28,"name":"定西市","id":348,"area_id":6},{"children":[],"level":"","parent_id":28,"name":"陇南市","id":349,"area_id":6},{"children":[],"level":"","parent_id":28,"name":"临夏自治州","id":350,"area_id":6},{"children":[],"level":"","parent_id":28,"name":"甘南藏族自治州","id":351,"area_id":6},{"children":[],"level":"","parent_id":28,"name":"庆阳市","id":510,"area_id":6},{"children":[],"level":"","parent_id":28,"name":"敦煌市","id":511,"area_id":6}],"level":"","parent_id":0,"name":"甘肃省","id":28,"area_id":6},{"children":[{"children":[],"level":"二线","parent_id":29,"name":"西宁市","id":352,"area_id":6},{"children":[],"level":"","parent_id":29,"name":"海东地区","id":353,"area_id":6},{"children":[],"level":"","parent_id":29,"name":"海北藏族自治州","id":354,"area_id":6},{"children":[],"level":"","parent_id":29,"name":"黄南藏族自治州","id":355,"area_id":6},{"children":[],"level":"","parent_id":29,"name":"海南藏族自治州","id":356,"area_id":6},{"children":[],"level":"","parent_id":29,"name":"果洛藏族自治州","id":357,"area_id":6},{"children":[],"level":"","parent_id":29,"name":"玉树藏族自治州","id":358,"area_id":6},{"children":[],"level":"","parent_id":29,"name":"海西蒙古族藏族自治州","id":359,"area_id":6},{"children":[],"level":"","parent_id":29,"name":"海东市","id":509,"area_id":6}],"level":"","parent_id":0,"name":"青海省","id":29,"area_id":6},{"children":[{"children":[],"level":"二线","parent_id":30,"name":"银川市","id":360,"area_id":6},{"children":[],"level":"","parent_id":30,"name":"石嘴山市","id":361,"area_id":6},{"children":[],"level":"","parent_id":30,"name":"吴忠市","id":362,"area_id":6},{"children":[],"level":"","parent_id":30,"name":"固原市","id":363,"area_id":6},{"children":[],"level":"","parent_id":30,"name":"中卫市","id":364,"area_id":6}],"level":"","parent_id":0,"name":"宁夏","id":30,"area_id":6},{"children":[{"children":[],"level":"二线","parent_id":31,"name":"乌鲁木齐市","id":365,"area_id":6},{"children":[],"level":"","parent_id":31,"name":"克拉玛依市","id":366,"area_id":6},{"children":[],"level":"","parent_id":31,"name":"吐鲁番地区","id":367,"area_id":6},{"children":[],"level":"","parent_id":31,"name":"哈密地区","id":368,"area_id":6},{"children":[],"level":"","parent_id":31,"name":"昌吉自治州","id":369,"area_id":6},{"children":[],"level":"","parent_id":31,"name":"博尔塔拉蒙古自治州","id":370,"area_id":6},{"children":[],"level":"","parent_id":31,"name":"巴音郭楞蒙古自治州","id":371,"area_id":6},{"children":[],"level":"","parent_id":31,"name":"阿克苏地区","id":372,"area_id":6},{"children":[],"level":"","parent_id":31,"name":"克孜勒苏柯尔克孜自治州","id":373,"area_id":6},{"children":[],"level":"","parent_id":31,"name":"喀什地区","id":374,"area_id":6},{"children":[],"level":"","parent_id":31,"name":"和田地区","id":375,"area_id":6},{"children":[],"level":"","parent_id":31,"name":"伊犁哈萨克自治州","id":376,"area_id":6},{"children":[],"level":"","parent_id":31,"name":"塔城地区","id":377,"area_id":6},{"children":[],"level":"","parent_id":31,"name":"阿勒泰地区","id":378,"area_id":6},{"children":[],"level":"","parent_id":31,"name":"和田市","id":505,"area_id":6},{"children":[],"level":"","parent_id":31,"name":"且末县","id":506,"area_id":6},{"children":[],"level":"","parent_id":31,"name":"塔城市","id":507,"area_id":6},{"children":[],"level":"","parent_id":31,"name":"伊宁市","id":508,"area_id":6}],"level":"","parent_id":0,"name":"新疆","id":31,"area_id":6},{"children":[],"level":"","parent_id":0,"name":"台湾省","id":32,"area_id":7},{"children":[],"level":"","parent_id":0,"name":"香港","id":33,"area_id":7},{"children":[],"level":"","parent_id":0,"name":"澳门","id":34,"area_id":7}]
          this.recursionChild(areas).then(data => {
            observer.next(new DirectionalAssign({areas: data})
            );
          })
        });
      })
    );
  };

  constructor(private actions$: Actions) {

  }

  recursionChild(target) {
    return new Promise((resolve, reject) => {
      let fun = `
      onmessage = function (e) {
          function recursionChild(target) {
            if(target instanceof Array && target.length > 0){
              target.forEach(data => {
                recursionChild(data);
              });
            }else{
              let list = target.children;
              if (list && list.length > 0) {
                list.forEach(data => {
                  data.parent = target;
                  recursionChild(data);
                });
              }
            }
          }
          recursionChild(e.data)
          postMessage(e.data);
      }
    `;
      const blob = new Blob([fun], {type: 'application/javascript'});
      const url = URL.createObjectURL(blob);
      const worker = new Worker(url);
      worker.postMessage(target);
      worker.onmessage = (e) => {
        resolve(e.data)
      };
    })
  }
}
